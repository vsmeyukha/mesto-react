[{"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/index.js":"1","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/reportWebVitals.js":"2","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/App.js":"3","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Main.js":"4","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Footer.js":"5","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/PopupWithForm.js":"6","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/PopupWithImage.js":"7","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Header.js":"8","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Cards.js":"9","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Profile.js":"10","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Card.js":"11","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/utils/Api.js":"12","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/contexts/CurrentUserContext.js":"13","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/EditProfilePopup.js":"14","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/EditAvatarPopup.js":"15","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/AddPlacePopup.js":"16"},{"size":511,"mtime":1611303428000,"results":"17","hashOfConfig":"18"},{"size":362,"mtime":1611303428000,"results":"19","hashOfConfig":"18"},{"size":7435,"mtime":1612111111883,"results":"20","hashOfConfig":"18"},{"size":511,"mtime":1611985633471,"results":"21","hashOfConfig":"18"},{"size":220,"mtime":1611445127751,"results":"22","hashOfConfig":"18"},{"size":898,"mtime":1611996715775,"results":"23","hashOfConfig":"18"},{"size":567,"mtime":1612110830443,"results":"24","hashOfConfig":"18"},{"size":170,"mtime":1611303428000,"results":"25","hashOfConfig":"18"},{"size":478,"mtime":1612110918463,"results":"26","hashOfConfig":"18"},{"size":1510,"mtime":1612121196627,"results":"27","hashOfConfig":"18"},{"size":1290,"mtime":1612118871229,"results":"28","hashOfConfig":"18"},{"size":1895,"mtime":1612207392585,"results":"29","hashOfConfig":"18"},{"size":133,"mtime":1611813584985,"results":"30","hashOfConfig":"18"},{"size":2556,"mtime":1611996709197,"results":"31","hashOfConfig":"18"},{"size":1271,"mtime":1612118025181,"results":"32","hashOfConfig":"18"},{"size":1344,"mtime":1612117474304,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"wupo04",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"36"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/index.js",[],["69","70"],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/reportWebVitals.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/App.js",["71"],"import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithImage from './PopupWithImage';\nimport api from '../utils/Api';\nimport currentUserContext from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\nfunction App() {\n\n  // ! создаем переменную состояния для задания контекста\n  const [currentUser, setCurrentUser] = React.useState({\n    name: '',\n    about: '',\n    avatar: '',\n    _id: ''\n  });\n\n  // ! используем эффект, чтобы загрузить с сервера первоначальные данные юзера и записать хи в currentUser\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(data => {\n        setCurrentUser(data);\n      })\n      .catch(err => console.error(`Ошибка при получении данных профиля: ${err}`))\n  }, []);\n\n    // ! объявляем переменную состояния, в которую будет приходить массив карточек\n    const [cards, setCards] = React.useState([]);\n\n    // ! при монтировании элемента в переменную cards из API приходит массив карточек\n    React.useEffect(() => {\n      api.getInitialCards()\n        .then(data => {\n          setCards(data);\n        })\n        .catch(err => console.error(`Ошибочка вышла - ${err}`));\n    }, []);\n  \n    // ! объявляем функцию лайка/отзыва лайка\n    function handleCardLike(card) {\n\n      // ! Снова проверяем, есть ли уже лайк на этой карточке\n      const isLiked = card.likes.some(i => i._id === currentUser._id);\n      \n      // ! Отправляем запрос в API и получаем обновлённые данные карточки\n      api.changeLikeCardStatus(card._id, !isLiked)\n        .then((newCard) => {\n          // ! Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        // Обновляем стейт\n          setCards(newCards);\n        })\n        .catch(err => console.error(`Ошибка добавления лайка: ${err}`))\n    }\n  \n    function handleCardDelete(card) {\n      api.deleteCard(card._id)\n        .then((cardForDeleting) => {\n          const cardsWithoutACard = cards.filter((c) => {\n            if (c._id !== card._id) {\n              return c;\n            }\n          })\n          setCards(cardsWithoutACard);\n        })\n        .catch(err => console.error(`Ошибка удаления карточки: ${err}`))\n    }\n\n  // ! создаем переменные состояния для открытия попапов с формой\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  // ! пишем функции изменения состояния переменных для открытия попапов с формой\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  // ! создаем переменную состояния для открытия фотки\n  const [selectedCard, setSelectedCard] = React.useState(null);\n\n  // ! пишем функцию изменения состояния переменной для открытия попапа с фото\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  // ! пишем функцию закрытия попапа\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  // ! функция обновления данных профиля\n  function handleUpdateUser(currentUser) {\n    api.editProfile(currentUser)\n      .then(data => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => console.error(`Ошибка при редактировании данных профиля: ${err}`));\n  }\n\n  function handleUpdateAvatar(currentUser) {\n    api.changeAvatar(currentUser)\n      .then(data => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => console.error(`Ошибка при редактировании аватара: ${err}`));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addNewCard(card)\n      .then(data => {\n        setCards([data, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.error(`Ошибка при добавлении изображения: ${err}`));\n  }\n\n  return (\n    // ! оборачиваем все приложение в провайдер контекста\n    <currentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"page__content\">\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Footer />\n                \n          {/* попап редактирования профиля */}\n\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser}\n            />\n\n          {/* попап редактирования аватара */}\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          {/* попап добавления новой карточки */}\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          {/* попап подтверждения удаления. его оформим в виде компонента позже */}\n          <div className=\"popup popup_type_submit\">\n\n            <div className=\"popup__container\">\n              <button className=\"popup__close-button popup__close-button_type_popup-with-forms\" type=\"button\"></button>\n              <h3 className=\"popup__title\">Вы уверены?</h3>\n              <button type=\"submit\" className=\"popup__submit\" value=\"Да\" name=\"submit\">Да</button>\n            </div>\n\n          </div>\n\n          {/* попап с картинкой */}\n          {selectedCard &&\n            <PopupWithImage\n              card={selectedCard}\n              onClose={closeAllPopups}\n            />\n          }\n\n        </div>\n      </div>\n    </currentUserContext.Provider>\n  );\n}\n\nexport default App;","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Main.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Footer.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/PopupWithForm.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/PopupWithImage.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Header.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Cards.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Profile.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/Card.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/utils/Api.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/contexts/CurrentUserContext.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/EditProfilePopup.js",[],"/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/EditAvatarPopup.js",["72"],"import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport currentUserContext from '../contexts/CurrentUserContext';\n\nfunction EditAvatarPopup(props) {\n\n  // const [avatarLink, setAvatarLink] = React.useState('');\n\n  const avatarInputRef = React.useRef('');\n\n  // const thisUser = React.useContext(currentUserContext);\n\n  // React.useEffect(() => {\n  //   setAvatarLink(thisUser.avatar);\n  // }, [thisUser]);\n\n  // function handleAvatarInputChange(e) {\n  //   setAvatarLink(avatarInputRef.current.value);\n  // }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateAvatar({\n      avatar: avatarInputRef.current.value\n    })\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Изменить аватар\"\n      name=\"change-avatar\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"url\"\n        className=\"popup__input popup__input_type_avatar-link\"\n        placeholder=\"Ссылка на аву\"\n        name=\"avatar-link\"\n        required\n        id=\"avatar-link\"\n        ref={avatarInputRef}\n\n      />\n      <span\n        className=\"popup__input-error\"\n        id=\"avatar-link-error\">\n      </span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;","/Users/victorsmeyukha/Desktop/dev/mesto-react-attempt2/src/components/AddPlacePopup.js",[],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":63,"column":54,"nodeType":"79","messageId":"80","endLine":63,"endColumn":56},{"ruleId":"81","severity":1,"message":"82","line":3,"column":8,"nodeType":"83","messageId":"84","endLine":3,"endColumn":26},"no-native-reassign",["85"],"no-negated-in-lhs",["86"],"array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","no-unused-vars","'currentUserContext' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]